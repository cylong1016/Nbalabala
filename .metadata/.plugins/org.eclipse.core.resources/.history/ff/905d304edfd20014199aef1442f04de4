package ui.common.panel;

import java.awt.Graphics;
import java.awt.Image;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;

import javax.swing.ImageIcon;

import ui.UIConfig;
import ui.common.button.ImgButton;
import ui.controller.MainController;

/**
 * 左边边框
 * 
 * @author lsy
 * @version 2015年3月17日 下午6:19:16
 */
public class LeftPanel extends Panel {

	/** serialVersionUID */
	private static final long serialVersionUID = 1L;

	private int secPanelX = UIConfig.LEFT_WIDTH * (-1);
	private ThreadIn threadIn;
	private ThreadOut threadOut;
	/** 边框移动速度 */
	private int speed = 5;
	/** 背景图片 */
	private Image bgImage;
	
	/** 横纵坐标 间距 宽高 */
//	private int x = 58, y = 202, inter = 54;
	private int x = 6, y = 312, inter = 39;
	/** 图片地址 */
	String url = UIConfig.IMG_PATH + "sidebar/";
	private String trans = url + "trans.png";
	private String on = url + "mouseOn.png";
	/** button */
	ImgButton allPlayers, allTeams, game, playerData, returnButton, teamData;
	/** button数组 */
	ImgButton[] buttonArr;
	MouListener mou = new MouListener();
	/** 获得底层panel */
	BottomPanel panel;
	MainController controller;
	
	public LeftPanel(BottomPanel panel, MainController controller) {
		this.panel = panel;
		this.controller = controller;
		this.setBounds(secPanelX, 0, UIConfig.LEFT_WIDTH, UIConfig.WIDTH);
		bgImage = new ImageIcon(url + "BG.png").getImage();
		buttonArr = new ImgButton[]{allPlayers,allTeams,game,playerData,teamData,returnButton};

		setButton();
		addButton();
	}

	/**
	 * 设置按钮
	 * 
	 * @author lsy
	 * @version 2015年3月20日 上午12:02:28
	 */
	public void setButton() {
//		allPlayers = new ImgButton(url + "allPlayers.png", x, y, url + "allPlayersOn.png", url
//				+ "allPlayersClick.png");
		for (int i = 0; i < buttonArr.length; i++) {
			buttonArr[i] = new ImgButton(trans, x, y + i * inter, on, on);
		}
//		allTeams = new ImgButton(url + "allTeams.png", x, y + inter, url + "allTeamsOn.png", url
//				+ "allTeamssClick.png");
//		game = new ImgButton(url + "game.png", x, y + 2 * inter, url + "gameOn.png", url
//				+ "gameClick.png");
//		playerData = new ImgButton(url + "playerData.png", x, y + 3 * inter, url + "playerDataOn.png", url
//				+ "playerClick.png");
//		teamData = new ImgButton(url + "teamData.png", x, y + 4 * inter, url + "teamDataOn.png", url
//				+ "teamDataClick.png");
//		returnButton = new ImgButton(url + "return.png", 13, 529, url + "returnOn.png", url
//				+ "returnClick.png");
		
	}
	
	public void addButton(){
//		buttonArr = new ImgButton[]{allPlayers,allTeams,game,playerData,teamData,returnButton};
		for(int i =0;i<buttonArr.length;i++){
			this.add(buttonArr[i]);
			buttonArr[i].addMouseListener(mou);
		}
	}
	
	class MouListener extends MouseAdapter{
		 public void mousePressed(MouseEvent e) {
			 if(e.getSource() == allPlayers){
				 controller.toAllPlayersPanel(panel);
			 }else if(e.getSource() == allTeams){
				 controller.toAllTeamsPanel(panel);
			 }else if(e.getSource() == game){
				 controller.toGamePanel(panel);
			 }else if(e.getSource() == playerData){
				 controller.toPlayerPanel(panel);
			 }else if(e.getSource() == teamData){
				 controller.toTeamPanel(panel);
			 }else if(e.getSource() == returnButton){
				 controller.toMainPanel(panel);
			 }
		 }
	}

	public void paint(Graphics g) {
		g.drawImage(bgImage, 0, 0, this);
		super.paint(g);
	}

	public void moveIn() {
		threadIn = new ThreadIn();
		threadIn.start();
	}

	public void moveOut() {
		threadOut = new ThreadOut();
		threadOut.start();
	}

	class ThreadIn extends Thread {

		public void run() {
			while (true) {
				if (secPanelX >= 0) {
					secPanelX = 0;
					LeftPanel.this.setLocation(secPanelX, 0);
					LeftPanel.this.repaint();
					break;
				}
				try {
					secPanelX = secPanelX + speed;
					LeftPanel.this.setLocation(secPanelX, 0);
					Thread.sleep(5);
					LeftPanel.this.repaint();
				} catch (InterruptedException e) {
					e.printStackTrace();
				}
			}
		}
	}

	class ThreadOut extends Thread {

		public void run() {
			while (true) {
				if (secPanelX <= UIConfig.LEFT_WIDTH * (-1)) {
					secPanelX = UIConfig.LEFT_WIDTH * (-1);
					LeftPanel.this.setLocation(secPanelX, 0);
					LeftPanel.this.repaint();
					break;
				}
				try {
					secPanelX = secPanelX - speed;
					LeftPanel.this.setLocation(secPanelX, 0);
					LeftPanel.this.repaint();
					Thread.sleep(5);
				} catch (InterruptedException e) {
					e.printStackTrace();
				}
			}
		}
	}

}
